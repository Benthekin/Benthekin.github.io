<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Game with Joystick, Inventory, and Jump</title>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }
    
    /* UI styles */
    #joystick-container {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 100px;
      height: 100px;
      background: rgba(200, 200, 200, 0.5);
      border-radius: 50%;
      touch-action: none;
    }
    #inventory {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      gap: 5px;
    }
    .inventory-item {
      width: 50px;
      height: 50px;
      background-color: lightgray;
      border: 2px solid black;
    }
    #jump-button {
      position: fixed;
      bottom: 100px;
      left: 60px;
      width: 80px;
      height: 80px;
      background-color: orange;
      border-radius: 50%;
      text-align: center;
      line-height: 80px;
      color: white;
      font-size: 20px;
      touch-action: none;
    }
  </style>
</head>
<body>
  <div id="joystick-container"></div>
  <div id="jump-button">Jump</div>
  <div id="inventory"></div>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    // Basic Three.js setup
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Inventory setup
    const inventoryContainer = document.getElementById('inventory');
    const blockTypes = [{ color: 0x228B22 }, { color: 0x8B4513 }, { color: 0xFFFFFF }];
    
    blockTypes.forEach((block, index) => {
      const item = document.createElement('div');
      item.className = 'inventory-item';
      item.style.backgroundColor = `#${block.color.toString(16)}`;
      item.onclick = () => selectBlock(index);
      inventoryContainer.appendChild(item);
    });

    let selectedBlockType = blockTypes[0];
    function selectBlock(index) { selectedBlockType = blockTypes[index]; }

    // Joystick setup
    const joystick = document.getElementById('joystick-container');
    let joystickOffset = { x: 0, y: 0 };
    let isDragging = false;

    joystick.addEventListener('pointerdown', () => isDragging = true);
    window.addEventListener('pointerup', () => { isDragging = false; joystickOffset = { x: 0, y: 0 }; });
    window.addEventListener('pointermove', (event) => {
      if (!isDragging) return;
      joystickOffset = { x: event.clientX - 50, y: event.clientY - 50 };
    });

    // Jump button
    const jumpButton = document.getElementById('jump-button');
    let jumpVelocity = 0;
    jumpButton.addEventListener('pointerdown', () => { if (camera.position.y <= 5) jumpVelocity = 0.5; });

    // Player movement
    function updateMovement() {
      const speed = 0.1;
      camera.position.x += joystickOffset.x * speed * 0.01;
      camera.position.z += joystickOffset.y * speed * 0.01;

      jumpVelocity += -0.02;  // Gravity
      camera.position.y += jumpVelocity;
      if (camera.position.y < 5) { camera.position.y = 5; jumpVelocity = 0; }
    }

    // Animation loop
    function animate() {
      requestAnimationFrame(animate);
      updateMovement();
      renderer.render(scene, camera);
    }

    animate();
  </script>
</body>
</html>
